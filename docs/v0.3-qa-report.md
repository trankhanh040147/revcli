# v0.3 QA Testing Report

**Date:** [Date]
**Tester:** [Name]
**Environment:** [OS, Terminal, Go version]
**Status:** [In Progress / Complete]

---

## 1. Code Block Highlighting & Navigation

### Code Block Detection
- [ ] Code blocks detected in initial review response
- [ ] Code blocks detected in chat follow-up responses
- [ ] Multiple code blocks in single response detected correctly
- [ ] Code blocks with various languages detected (go, python, javascript, c++, c#, f#, objective-c)
- [ ] Code blocks without language identifier detected (empty language)

### Visual Highlighting
- [ ] Active code block shows purple border (#7C3AED)
- [ ] Border is visible and distinct
- [ ] Only one code block highlighted at a time
- [ ] Highlighting updates when navigating between blocks
- [ ] Highlighting persists when scrolling

### Navigation
- [ ] `[` key navigates to previous code block
- [ ] `]` key navigates to next code block
- [ ] Navigation wraps (from first to last, last to first)
- [ ] Viewport scrolls to show active code block
- [ ] Navigation works with multiple code blocks in review
- [ ] Navigation works with code blocks in chat responses
- [ ] Navigation works when code blocks span across review and chat

### Smart Yank
- [ ] `yb` yanks the currently highlighted code block
- [ ] Yanked content is correct (no ANSI codes, just code)
- [ ] Falls back to last code block if none highlighted
- [ ] Works for code blocks in review response
- [ ] Works for code blocks in chat responses
- [ ] Visual feedback shows "✓ Copied code block to clipboard!"

### Contextual Hints
- [ ] Footer shows code block navigation hint when block is active
- [ ] Hint shows correct block number (e.g., "Block 2/5")
- [ ] Hint disappears when no code block is active

---

## 2. Chat Enhancements

### Request Cancellation
- [ ] `Ctrl+X` cancels streaming request during initial review
- [ ] `Ctrl+X` cancels streaming request during chat response
- [ ] Partial response is retained after cancellation
- [ ] "Request cancelled" feedback message appears
- [ ] Can continue chatting after cancellation
- [ ] New requests work after cancellation

### Prompt History
- [ ] `Ctrl+P` navigates to previous prompt in chat mode
- [ ] `Ctrl+N` navigates to next prompt in chat mode
- [ ] History wraps correctly (from first to last, last to first)
- [ ] Prompts saved when sent with `Alt+Enter`
- [ ] History persists across chat sessions in same review
- [ ] Empty prompt clears textarea when navigating beyond last
- [ ] Can edit and resend prompts from history

---

## 3. Preset Management

### Preset List
- [x] `revcli preset list` shows all built-in presets
- [x] Presets display with descriptions
- [x] Empty custom preset directory handled gracefully
- [x] `revcli preset list` shows all custom presets
- [x] Built-in and custom presets are clearly separated

### Preset Create
- [x] `revcli preset create <name>` creates preset interactively
- [x] Required name, show error when no name is provided
- [x] Duplicate preset names rejected
- [x] File saved to `~/.config/revcli/presets/<lowercase-name>.yaml`
- [x] Preset created with name, description, and prompt
- [x] Directory created if it doesn't exist
- [x] Success message displayed
- [x] Preset name normalized to lowercase
- [ ] Invalid YAML handled gracefully
#### [BUGS]
- [x] **Bug #01:**  The `preset create` command fails when users enter multi-word descriptions because fmt.Scanln() only reads up to the first whitespace. 
### Preset Delete
- [x] `revcli preset delete <name>` deletes custom preset
- [x] Built-in presets cannot be deleted (error message)
- [x] Confirmation prompt works (y/N)
- [x] File removed from filesystem
- [x] Success message displayed
- [x] Case-insensitive deletion works
- [x] Non-existent preset shows error
### Preset Show
- [x] `revcli preset show <name>` displays preset details
- [x] Shows name, description, and prompt
- [x] Works for built-in presets
- [x] Works for custom presets
- [x] Case-insensitive lookup works
- [x] Non-existent preset shows error
#### [BUGS]
- [x] **Bugs #02**
	- Recommend preset: Can not list custom presets when mistype
	- Recommend feature: Implement fuzzy matching when mistyping  
### Preset Usage
- [x] `revcli review --preset <name>` uses preset correctly
- [x] Custom presets work in review command
- [x] Built-in presets work in review command
- [x] Case-insensitive preset names work

---

## 4. Regression Testing

### Existing Features
- [ ] Short flag aliases work (`-s`, `-b`, `-m`, `-f`, `-i`, `-I`, `-k`, `-p`, `-v`)
- [ ] Vim navigation works (`j/k`, `g/G`, `Ctrl+d/u/f/b`)
- [ ] Search works (`/`, `n/N`, `Tab` toggle)
- [ ] Help overlay works (`?` key)
- [ ] Yank commands work (`y`, `Y`, `yb`)
- [ ] Chat mode works (`Enter` to enter, `Alt+Enter` to send)
- [ ] Review presets work (`--preset` flag)

### Bug Fixes Verification
- [ ] **Bug 1 Fixed:** Code block line numbers match viewport (test with review + chat)
- [ ] **Bug 2 Fixed:** Languages with special chars detected (`c++`, `c#`, `f#`, `objective-c`)
- [ ] **Bug 3 Fixed:** Preset case sensitivity works (create `MyPreset`, delete `mypreset`)

---

## 5. Edge Cases & Error Handling

### Code Blocks
- [ ] Empty code blocks handled
- [ ] Code blocks with only whitespace handled
- [ ] Very long code blocks handled
- [ ] Code blocks with special characters handled
- [ ] Nested code blocks (if possible in markdown) handled
- [ ] Code blocks at end of content handled
- [ ] Code blocks at start of content handled

### Chat
- [ ] Very long prompts handled
- [ ] Empty prompts rejected
- [ ] Special characters in prompts handled
- [ ] Multiple rapid cancellations handled
- [ ] History with many prompts handled

### Presets
- [ ] Very long preset names handled
- [ ] Preset names with special characters handled
- [ ] Very long preset prompts handled
- [ ] Missing preset directory handled
- [ ] Corrupted preset YAML handled
- [ ] Permissions issues handled

---

## 6. UI/UX Testing

### Visual
- [ ] Code block border is visible in various terminal themes
- [ ] Border doesn't break layout
- [ ] Footer hints are readable
- [ ] Help overlay displays correctly
- [ ] No visual glitches when navigating

### Performance
- [ ] Large reviews with many code blocks perform well
- [ ] Navigation is smooth
- [ ] No lag when highlighting code blocks
- [ ] Rendering is fast

### Accessibility
- [ ] All features accessible via keyboard
- [ ] Help overlay shows all keybindings
- [ ] Error messages are clear
- [ ] Success messages are clear

---

## 7. Cross-Platform (if applicable)

- [ ] Works on Linux
- [ ] Works on macOS (if applicable)
- [ ] Works on Windows (if applicable)
- [ ] Terminal compatibility verified

---

## Test Results Summary

**Total Tests:** [Number]
**Passed:** [Number]
**Failed:** [Number]
**Blocked:** [Number]

**Overall Status:** [Pass / Fail / Needs Work]

**Notes:**
[Any additional observations or recommendations]

---

## New Issues:
> **NOTES:** Issues relating to this current version 

#rv-is-preset
- [ ] **IS01**  : In `~/.config/revcli/presets/` : Do not have custom presets, user can't edit custom presets
- [ ] **IS02** Missing feature: let user edit preset in command line or edit file manually 
- [ ] **IS03:** Missing feature: open preset folder/file
- [ ] **IS04** Missing feature: set default preset
- [ ] **IS05**: Preset got overriden by system prompt 
	1. Allow presets to optionally replace (not append to) the base prompt
	2. Add a flag like --preset-replace to completely override the base prompt
	3. Allow user to modify system prompt
## New Features 
> **NOTES:** These features maybe implemented in this phase or be noted in later release if note too much relevant to current version

#rv-feat-preset
- [ ] **FT01**: preset cp
- [ ] **FT02**: Interactive preset management:
	- [ ] `preset manage` : Open a panel which users can (create, edit, delete, cp, choose default, go) interactively (Is it possible ?) --> Later releases
- [ ] **FT03**: Able to change preset in follow-up questions
- [ ] **FT04**: Able to change language (Vietnamese, English,...)
- [ ] **FT05:** Programming languages presets